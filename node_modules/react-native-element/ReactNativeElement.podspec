require "json"

package = JSON.parse(File.read(File.join(Dir::pwd, "package.json")))
version = package['version']

Pod::Spec.new do |s|

  s.name         = "ReactNativeElement"

  s.version      = version

  s.summary      = "react native element: mini foundation and many element"

  s.description  = <<-DESC
react native element, use ReactNative like a mini program, provide many UI elements and API
DESC

  s.homepage     = "https://onety.cn/sf/blog/blog/index.html"

  s.license      = "MIT"

  s.author       = { "wangtieshan" => "15003836653@163.com" }

  s.platform     = :ios, "8.0"

  #s.source       = { :git => "http://gitlab.shenmajr.com/tieshan.wang/RNCommon.git", :tag => s.version }

  # s.source       = { :path => "./ios", :tag => s.version }

  s.source = { :path => "./Library", :tag => s.version }

  s.framework  = "UIKit", "Foundation"

  s.subspec "ECore" do |ss|

    ss.framework  = "UIKit", "Foundation"

    ss.dependency 'React'

    ss.dependency 'ZipArchive', '~> 1.4.0'

    ss.source_files  = "Library/react-native-element-core/ios/api/*.{h,m,swift}", "Library/react-native-element-core/ios/mini/**/*.{h,m,swift}", "Library/react-native-element-core/ios/event/*.{h,m,swift}", "Library/react-native-element-core/ios/mini/*.{h,m,swift}", "Library/react-native-element-core/ios/net/*.{h,m,swift}", "Library/react-native-element-core/ios/tool/*.{h,m,swift}", "Library/react-native-element-core/ios/difflib/*.{c,h,m}"

    ss.requires_arc = ["Library/react-native-element-core/ios/api/*.{h,m,swift}", "Library/react-native-element-core/ios/mini/**/*.{h,m,swift}", "Library/react-native-element-core/ios/event/*.{h,m,swift}", "Library/react-native-element-core/ios/mini/*.{h,m,swift}", "Library/react-native-element-core/ios/net/*.{h,m,swift}", "Library/react-native-element-core/ios/tool/*.{h,m,swift}"]
  end

  s.subspec "EPreviewImage" do |ss|

    ss.source_files  = "Library/react-native-element-previewimage/ios/*.{h,m,swift}"

    ss.dependency 'React'
  end

  s.subspec "ELinearGradient" do |ss|

    ss.source_files  = "Library/react-native-element-linear-gradient/ios/*.{h,m,swift}"

    ss.dependency 'React'
  end

  s.subspec "EFileManager" do |ss|

    ss.source_files  = "Library/react-native-element-filemanager/ios/*.{h,m,swift}"

    ss.dependency 'React'
  end

  s.subspec "ELogger" do |ss|

    ss.source_files  = "Library/react-native-element-logger/ios/*.{h,m,swift}"

    ss.dependency 'React'
  end

  s.subspec "EImageTool" do |ss|

    ss.source_files  = "Library/react-native-element-imagetool/ios/*.{h,m,swift}"

    ss.dependency "ReactNativeElement/EFileManager"

    ss.dependency 'React'
  end

end
