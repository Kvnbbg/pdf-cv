//
//  ELogger.m
//  T
//
//  Created by 王铁山 on 2017/10/29.
//  Copyright © 2017年 tieshan. All rights reserved.
//

#import "ELogger.h"

const NSString * ELoggerLogNotification = @"ELoggerLogNotification";

@implementation ELogger

RCT_EXPORT_MODULE();

RCT_EXPORT_METHOD(log:(NSString *)obj) {
       
    @try {
        
        NSDictionary * configObj = [self stringToObject: obj];
        
        if (configObj) {
            [[NSNotificationCenter defaultCenter] postNotificationName:ELoggerLogNotification object:configObj];
        }

    } @catch (NSException *exception) {
        
    } @finally {
        
    }
}

@end


@implementation ELogger(tool)


-(id)stringToObject: (NSString *)str {
    if (!str) {
        return nil;
    }
    return [NSJSONSerialization JSONObjectWithData:[str dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:nil];
}

@end
