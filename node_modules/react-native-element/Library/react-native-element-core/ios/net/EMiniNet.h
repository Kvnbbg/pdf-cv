//
//  EMiniNet.h
//  reactnativeelement
//
//  Created by 王铁山 on 2018/5/10.
//  Copyright © 2018年 王铁山. All rights reserved.
//

#import <Foundation/Foundation.h>

typedef NSString EMiniRequestNotificationKey;

extern const EMiniRequestNotificationKey * EMiniRequestNotificationKeyDidResume;

extern const EMiniRequestNotificationKey * EMiniRequestNotificationKeyDidComplete;

@interface EMiniRequest : NSObject

@property(nonatomic, copy) NSString * path;

@property(nonatomic, copy) NSString * httpMethod;

@property(nonatomic, copy) NSString * contentType;

@property(nonatomic, strong) NSDictionary * header;

@property(nonatomic, strong) NSDictionary * body;

@property(nonatomic, assign) NSStringEncoding responseEncoding;

@property(nonatomic, strong) NSURLSessionTask * task;

@property(nonatomic, copy) void(^progress)(double progress);

@property(nonatomic, copy) void(^complete)(id data, NSURLResponse * response, NSError * error);

- (instancetype)init:(NSString *)path;

@end

@interface EMiniUploadRequest : EMiniRequest
    
@property(nonatomic, copy) NSString * filePath;

@property(nonatomic, copy) NSString * fileName;

@property(nonatomic, copy) NSString * fileType;

@property(nonatomic, strong) NSData * fileData;
    
@end


@interface EMiniNet : NSObject

@property(nonatomic, strong)NSURLSession * session;

@property(nonatomic, strong)NSDictionary * defaultHeaders;

+(instancetype)share;

+(instancetype)background;

// MARK - http

-(NSURLSessionTask *)get:(NSString *)path params:(NSDictionary *)params header: (NSDictionary *)header;

-(NSURLSessionTask *)post:(NSString *)path params:(NSDictionary *)params header: (NSDictionary *)header;

-(NSURLSessionTask *)reqeust:(EMiniRequest *)request;

// MARK: - updload

-(NSURLSessionUploadTask *)upload: (NSString *)path
                           params: (NSDictionary *)params
                           header: (NSDictionary *)header
                             file: (NSString *)file
                         fileName: (NSString *)fileName
                         fileType: (NSString *)fileType;

-(NSURLSessionUploadTask *)uploadRequest:(EMiniUploadRequest *)request;

// MARK - download

- (EMiniRequest *)downLoadByPath:(NSString *)path;

- (NSURLSessionDownloadTask *)down: (EMiniRequest *)request;

@end
