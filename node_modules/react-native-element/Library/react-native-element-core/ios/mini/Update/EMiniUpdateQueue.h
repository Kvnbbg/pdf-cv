//
//  EMiniUpdateQueue.h
//  Pods
//
//  Created by 王铁山 on 2018/6/28.
//
//

#import <Foundation/Foundation.h>

#import "EMiniUpdateManager.h"

/**
 小程序更新队列，负责管理所有小程序的更新
 */
@interface EMiniUpdateQueue : NSObject

/**
 管理的更新ID
 */
@property (nonatomic, strong, readonly) NSArray * managerMiniIds;

/**
 队列

 @return 实例
 */
+ (EMiniUpdateQueue *)defaultQueue;

/**
 开始队列功能
 */
- (void)startQueue;

/**
 停止队列功能
 */
- (void)stopQueue;

/**
 添加一个需要管理的小程序
 
 @param miniId 小程序ID
 */
- (EMiniUpdateManager *)addMiniId: (NSString *)miniId;

/**
  检查已经添加的所有的小程序更新。此方法可以多次调用。
 */
- (void)beginCheckUpdateAll;

/**
 检查更新指定的小程序

 @param miniId 小程序ID
 */
- (void)beginCheckUpdate: (NSString *)miniId;

/**
 开始检查更新指定 manager
 
 @param manager manager
 */
- (void)beginCheckUpdateManager: (EMiniUpdateManager *)manager;

/**
 检查某个小程序是否正在更新中
 
 @param miniId 小程序ID
 @param check 回调
 */
- (void)isUpdating: (NSString *)miniId check: (void(^)(BOOL updating, EMiniUpdateManager * manager)) check;

@end
