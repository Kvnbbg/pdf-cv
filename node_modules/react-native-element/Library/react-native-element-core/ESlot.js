/**
 * Created on 14:25 2019/03/12.
 * file name ESlot
 * by wangtieshan
 */

import React from 'react';

import PropTypes from 'prop-types';

import {
    View
} from 'react-native';

/**
 * 插槽
 */
export class ESlot extends React.Component {

    static propTypes = {
        /**
         * name
         */
        name: PropTypes.string.isRequired,
        /**
         * super's children
         */
        superChildren: PropTypes.oneOfType([PropTypes.node, PropTypes.arrayOf(PropTypes.node)])
    };

    render() {
        return this.finds(this.props.superChildren)
    }

    finds(children: React.Component|React.Component[]): React.Component[] {
        let result = [];
        if (children) {
            if (children.hasOwnProperty('length') && children.length) {
                for (let child of children) {
                    if (this._check(child)) {
                        result.push(child)
                    }
                }
            } else if (this._check(children)) {
                result.push(children)
            }
        }
        return result.length ? result : (this.props.children || <View style={{ display: 'none' }}/>)
    }

    _check(child): boolean {
        return child && child.props && child.props.hasOwnProperty('slot') && child.props.slot === this.props.name
    }
}