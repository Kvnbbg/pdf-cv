/**
 * Created on 14:54 2019/03/13.
 * file name ERowInput
 * by wangtieshan
 */

import React from "react";

import { ERowGeneral } from "../react-native-element-row/ERowGeneral";

import { EButton } from '../react-native-element-core/EButton';

import { ETextInput } from '../react-native-element-core/ETextInput';

import { ETheme } from '../react-native-element-core/theme';

import PropTypes from 'prop-types';

/**
 * 输入框
 * 从左向右
 * title
 * input
 * button
 */
export class ERowInput extends React.Component {

    static propTypes = {
        ...ERowGeneral.propTypes,
        /**
         * 右侧按钮配置。放置的是一个 EButton
         */
        button: PropTypes.shape(...EButton.propTypes),
        /**
         * 内容发生改变
         * (text)=>void
         */
        onChangeText: PropTypes.func,
        /**
         * 输入框内容
         */
        value: PropTypes.string,
    };

    _onChangeText(text) {
        this.props.onChangeText && this.props.onChangeText(text)
    }

    render() {
        return (
            <ERowGeneral
                maskOpacity={0}
                {...this.props}>
                <ETextInput
                    style={{ alignSelf: 'stretch', flex: 1, marginRight: ETheme.css.row.sideDistance }}
                    {...this.props}
                    onChangeText={(text)=>this._onChangeText(text)}
                    value={this.props.value}
                    placeholder={this.props.placeholder}
                    slot={'value'}/>
                {this.props.children}
                {!this.props.hiddenArrow &&
                <EButton
                    maskOpacity={0}
                    borderConfig={{borderRadius: 0}}
                    style={{ backgroundColor: 'transparent', marginRight: ETheme.css.row.sideDistance }}
                    {...this.props.button}
                    slot={'custom'}/>}
            </ERowGeneral>
        )
    }
}
