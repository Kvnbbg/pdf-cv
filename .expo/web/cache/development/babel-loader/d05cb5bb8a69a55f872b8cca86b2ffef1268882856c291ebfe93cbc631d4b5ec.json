{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Platform } from 'expo-modules-core';\nexport default {\n  get name() {\n    return 'ExpoDocumentPicker';\n  },\n  getDocumentAsync: function () {\n    var _getDocumentAsync = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(_ref) {\n      var _ref$type, type, _ref$multiple, multiple, input;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _ref$type = _ref.type, type = _ref$type === void 0 ? '*/*' : _ref$type, _ref$multiple = _ref.multiple, multiple = _ref$multiple === void 0 ? false : _ref$multiple;\n            if (Platform.isDOMAvailable) {\n              _context2.next = 3;\n              break;\n            }\n            return _context2.abrupt(\"return\", {\n              canceled: true,\n              assets: null\n            });\n          case 3:\n            input = document.createElement('input');\n            input.style.display = 'none';\n            input.setAttribute('type', 'file');\n            input.setAttribute('accept', Array.isArray(type) ? type.join(',') : type);\n            input.setAttribute('id', String(Math.random()));\n            if (multiple) {\n              input.setAttribute('multiple', 'multiple');\n            }\n            document.body.appendChild(input);\n            return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n              input.addEventListener('change', _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n                var results, i, assets;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) switch (_context.prev = _context.next) {\n                    case 0:\n                      if (!input.files) {\n                        _context.next = 15;\n                        break;\n                      }\n                      results = [];\n                      for (i = 0; i < input.files.length; i++) {\n                        results.push(readFileAsync(input.files[i]));\n                      }\n                      _context.prev = 3;\n                      _context.next = 6;\n                      return Promise.all(results);\n                    case 6:\n                      assets = _context.sent;\n                      resolve({\n                        canceled: false,\n                        assets: assets,\n                        output: input.files\n                      });\n                      _context.next = 13;\n                      break;\n                    case 10:\n                      _context.prev = 10;\n                      _context.t0 = _context[\"catch\"](3);\n                      reject(_context.t0);\n                    case 13:\n                      _context.next = 16;\n                      break;\n                    case 15:\n                      resolve({\n                        canceled: true,\n                        assets: null\n                      });\n                    case 16:\n                      document.body.removeChild(input);\n                    case 17:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }, _callee, null, [[3, 10]]);\n              })));\n              var event = new MouseEvent('click');\n              input.dispatchEvent(event);\n            }));\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    function getDocumentAsync(_x) {\n      return _getDocumentAsync.apply(this, arguments);\n    }\n    return getDocumentAsync;\n  }()\n};\nfunction readFileAsync(targetFile) {\n  return new Promise(function (resolve, reject) {\n    var mimeType = targetFile.type;\n    var reader = new FileReader();\n    reader.onerror = function () {\n      reject(new Error(\"Failed to read the selected media because the operation failed.\"));\n    };\n    reader.onload = function (_ref3) {\n      var target = _ref3.target;\n      var uri = target.result;\n      resolve({\n        uri: uri,\n        mimeType: mimeType,\n        name: targetFile.name,\n        lastModified: targetFile.lastModified,\n        size: targetFile.size,\n        file: targetFile\n      });\n    };\n    reader.readAsDataURL(targetFile);\n  });\n}","map":{"version":3,"names":["Platform","name","getDocumentAsync","_getDocumentAsync","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","_ref","_ref$type","type","_ref$multiple","multiple","input","wrap","_callee2$","_context2","prev","next","isDOMAvailable","abrupt","canceled","assets","document","createElement","style","display","setAttribute","Array","isArray","join","String","Math","random","body","appendChild","Promise","resolve","reject","addEventListener","_callee","results","i","_callee$","_context","files","length","push","readFileAsync","all","sent","output","t0","removeChild","stop","event","MouseEvent","dispatchEvent","_x","apply","arguments","targetFile","mimeType","reader","FileReader","onerror","Error","onload","_ref3","target","uri","result","lastModified","size","file","readAsDataURL"],"sources":["/home/kevin/Documents/Github/pdf-cv/pdf-cv/node_modules/expo-document-picker/src/ExpoDocumentPicker.web.ts"],"sourcesContent":["import { Platform } from 'expo-modules-core';\n\nimport { DocumentPickerAsset, DocumentPickerOptions, DocumentPickerResult } from './types';\n\nexport default {\n  get name(): string {\n    return 'ExpoDocumentPicker';\n  },\n\n  async getDocumentAsync({\n    type = '*/*',\n    multiple = false,\n  }: DocumentPickerOptions): Promise<DocumentPickerResult> {\n    // SSR guard\n    if (!Platform.isDOMAvailable) {\n      return { canceled: true, assets: null };\n    }\n\n    const input = document.createElement('input');\n    input.style.display = 'none';\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', Array.isArray(type) ? type.join(',') : type);\n    input.setAttribute('id', String(Math.random()));\n    if (multiple) {\n      input.setAttribute('multiple', 'multiple');\n    }\n\n    document.body.appendChild(input);\n\n    return new Promise((resolve, reject) => {\n      input.addEventListener('change', async () => {\n        if (input.files) {\n          const results: Promise<DocumentPickerAsset>[] = [];\n          for (let i = 0; i < input.files.length; i++) {\n            results.push(readFileAsync(input.files[i]));\n          }\n          try {\n            const assets = await Promise.all(results);\n            resolve({ canceled: false, assets, output: input.files });\n          } catch (e) {\n            reject(e);\n          }\n        } else {\n          resolve({ canceled: true, assets: null });\n        }\n\n        document.body.removeChild(input);\n      });\n\n      const event = new MouseEvent('click');\n      input.dispatchEvent(event);\n    });\n  },\n};\n\nfunction readFileAsync(targetFile: File): Promise<DocumentPickerAsset> {\n  return new Promise((resolve, reject) => {\n    const mimeType = targetFile.type;\n\n    const reader = new FileReader();\n    reader.onerror = () => {\n      reject(new Error(`Failed to read the selected media because the operation failed.`));\n    };\n    reader.onload = ({ target }) => {\n      const uri = (target as any).result;\n      resolve({\n        uri,\n        mimeType,\n        name: targetFile.name,\n        lastModified: targetFile.lastModified,\n        size: targetFile.size,\n        file: targetFile,\n      });\n    };\n\n    // Read in the image file as a binary string.\n    reader.readAsDataURL(targetFile);\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}